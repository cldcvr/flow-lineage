import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import { html } from "lit-html";
import { unsafeSVG } from "lit-html/directives/unsafe-svg.js";
import Properties from "./properties.md";

<Meta
  title="Components/f-lineage"
  parameters={{
    controls: { hideNoControlsWarning: true },
  }}
/>

# f-lineage

<br />
<br />

## Overview

A lineage chart is a graphical representation of a node's ancestors, showing the relationships among nodes. It is often used in analytics to show the relations and to trace their ancestry. Lineage charts can be in the form of a hierarchy data, showing the relationships between parents and children, or they can be more complex and show the relationships between more distant nodes. Lineage charts can be useful for investigating the hierarchy of a data.

<br />

### [Playground](/story/components-f-lineage--playground)

<Canvas>
  <Story
    name="Playground"
    argTypes={{
      direction: {
        control: "select",
        options: ["horizontal", "vertical"],
      },
      data: {
        control: "object",
      },
      padding: {
        control: "number",
      },
      gap: {
        control: "number",
      },
      ["node-size"]: {
        control: "object",
      },
      ["children-node-size"]: {
        control: "object",
      },
      ["max-children"]: {
        control: "number",
      },
    }}
    args={{
      direction: "horizontal",
      padding: 28,
      gap: 100,
      ["node-size"]: { width: 200, height: 52 },
      ["children-node-size"]: { width: 200, height: 32 },
      ["max-children"]: 8,
      ["node-template"]: `
	  <f-div style="position:absolute;top:-20px;z-index:1;" gap="x-small">
	   <f-tag label="Construction" state="primary" size="small" ></f-tag>
	   <f-tag label="Cat" size="small" counter="35"></f-tag>
	 </f-div>
	  <f-div
        state=\${node.id==="Max"?'custom,#006ecc':'secondary'}
        width="100%"
        height="100%"
        padding="none medium"
        align="middle-left"
        variant="curved"
        gap="small"
        \${node.children && !node.hideChildren ? 'border="small solid default bottom"' : ""}
      >
	  	<f-icon-button icon="i-table" state="neutral"></f-icon-button>
        <f-div direction="column" height="hug-content" align="middle-left">
          <f-text variant="code" size="large" ellipsis>\${node.id}</f-text>
          <f-text variant="code" size="small" ellipsis
            >x: \${node.x}, y: \${node.y}</f-text
          >
        </f-div>
		\${node.childrenToggle}
      </f-div>`,
      ["children-node-template"]: `<f-div
          state="secondary"
          width="100%"
          height="100%"
          padding="none medium"
          align="middle-left"
          gap="small"
          border="small solid default bottom"
        >
          <f-icon source="i-hashtag" size="small"></f-icon>
          <f-text variant="code" size="medium" ellipsis>\${node.id}</f-text>
        </f-div>`,
      links: [
        {
          from: "Tony",
          to: "Charlie",
        },
        {
          from: "Charlie",
          to: "Tony",
        },
        {
          from: "Max",
          to: "Charlie",
        },
        {
          from: "Calvin",
          to: "Hansen",
        },
        {
          from: "Brooke",
          to: "Tamara",
        },
        {
          from: "Calvin",
          to: "Bradley",
        },
        {
          from: "Tamara",
          to: "Bradley",
        },
        {
          from: "Charlie",
          to: "Roger",
        },
        {
          from: "Charlie",
          to: "Brooke",
        },
        {
          from: "Bradley",
          to: "John",
        },
        {
          from: "Bradley",
          to: "Tim",
        },
        {
          from: "Bradley",
          to: "Sam",
        },
        {
          from: "Bradley",
          to: "Rex",
        },
        {
          from: "Rex",
          to: "Bradley",
        },
        {
          from: "Roger",
          to: "Calvin",
        },
        {
          from: "Charlie",
          to: "Alicen",
        },
        {
          from: "Alicen",
          to: "Jennifer",
        },
        {
          from: "Jennifer",
          to: "John",
        },
        {
          from: "child1",
          to: "Tim",
        },
        {
          from: "Rex",
          to: "Pat",
        },
        {
          from: "A",
          to: "B",
        },
        {
          from: "Brooke",
          to: "child1",
        },
        {
          from: "mchild1",
          to: "child2",
        },
      ],
      nodes: {
        Calvin: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Calvin",
          },
          children: {
            child1: {
              click: function (event, node) {
                console.log("Child Node Clicked", event, node);
              },
              rightClick: function (event, node) {
                console.log("Child Node Right Clicked", event, node);
              },
            },
            child2: {},
            child3: {},
            child4: {},
            child5: {},
            child6: {},
            child7: {},
            child8: {},
            child9: {},
            child10: {},
            child11: {},
            child12: {},
            child13: {},
            child14: {},
            child15: {},
            child16: {},
          },
          click: function (event, node) {
            console.log("Node Clicked", event, node);
          },
          rightClick: function (event, node) {
            console.log("Node Right Clicked", event, node);
          },
        },
        Hansen: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Hansen",
          },
          children: { hchild1: {} },
        },
        Alicen: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Alicen",
          },
        },
        Jennifer: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Jennifer",
          },
        },
        Brooke: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Brooke",
          },
        },
        Tamara: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Tamara",
          },
        },
        Bradley: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Bradley",
          },
        },
        Roger: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Roger",
          },
        },
        Max: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Max",
          },
          hideChildren: false,
          children: {
            mchild1: {},
            mchild2: {},
            mchild3: {},
            mchild4: {},
            mchild5: {},
            mchild6: {},
            mchild7: {},
            mchild8: {},
            mchild9: {},
            mchild10: {},
            mchild11: {},
            mchild12: {},
            mchild13: {},
            mchild14: {},
            mchild15: {},
            mchild16: {},
          },
        },
        Tony: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Tony",
          },
          nodeTemplate: ` <f-div
        state="custom,#284376"
        width="100%"
        height="100%"
        padding="none medium"
        align="middle-left"
        variant="curved"
        gap="small"
    	style="border-radius:100px;"
        \${node.children ? 'border="small solid default bottom"' : ""}
      >
        <f-icon-button icon="i-user"></f-icon-button>
        <f-div direction="column" height="hug-content" align="middle-left">
          <f-text variant="code" size="large" ellipsis>\${node.id}</f-text>
          <f-text variant="code" size="small" ellipsis
            >x: \${node.x}, y: \${node.y}</f-text
          >
        </f-div>
    	\${node.childrenToggle}
      </f-div>`,
        },
        Charlie: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Roger",
          },
        },
        John: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "John",
          },
        },
        Tim: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Tim",
          },
        },
        Sam: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Sam",
          },
        },
        Rex: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Rex",
          },
        },
        Pat: {
          data: {
            email: "abc@cldcvr.com",
            mobile: "+91-12345 67890",
            name: "Pat",
          },
        },
      },
    }}
  >
    {(args) => {
      const handleReady = (e) => {
        console.log("Got ready event", e);
      };
      //  const data = lineageDataGenerator();
      return html`<f-lineage
        .direction=${args.direction}
        .padding=${args.padding}
        .gap=${args.gap}
        .node-size=${args["node-size"]}
        .children-node-size=${args["children-node-size"]}
        .max-children=${args["max-children"]}
        .node-template=${args["node-template"]}
        .children-node-template=${args["children-node-template"]}
        .links=${args.links}
        .nodes=${args.nodes}
        stager-load="1"
        @ready=${handleReady}
      ></f-lineage>`;
    }}
  </Story>
</Canvas>

<br />

<Properties />
