import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import { html } from "lit-html";
import { unsafeSVG } from "lit-html/directives/unsafe-svg.js";
import lineageDataGenerator from "./lineage-data-generator.ts";

<Meta
  title="Components/f-lineage"
  parameters={{
    controls: { hideNoControlsWarning: true },
  }}
/>

# f-lineage

<br />
<br />

## Overview

<f-div direction="column" gap="x-small" height="hug-content">
  <f-icon-button icon="i-delete" type="transparent"></f-icon-button>
  <f-icon-button icon="i-edit" type="transparent"></f-icon-button>
</f-div>

f-lineage to display nodes and connections.

<br />

### [Playground](/story/components-f-lineage--playground)

<Canvas>
  <Story
    name="Playground"
    argTypes={{
      direction: {
        control: "select",
        options: ["horizontal", "vertical"],
      },
      data: {
        control: "object",
      },
      padding: {
        control: "number",
      },
      gap: {
        control: "number",
      },
      ["node-size"]: {
        control: "object",
      },
      ["children-node-size"]: {
        control: "object",
      },
      ["max-childrens"]: {
        control: "number",
      },
    }}
    args={{
      direction: "horizontal",
      data: [
        {
          id: "level1_1",
          to: [
            {
              id: "level1_2_1",
            },
            {
              id: "level1_2_2",
              to: [
                {
                  id: "level1_3_1",
                  to: [
                    {
                      id: "level1_4_1",
                    },
                    {
                      id: "level1_4_2",
                    },
                  ],
                },
              ],
            },
          ],
          children: [
            {
              id: "child1",
            },
            {
              id: "child2",
            },
            {
              id: "child3",
            },
            {
              id: "child4",
            },
            {
              id: "child5",
            },
            {
              id: "child6",
            },
            {
              id: "child7",
            },
            {
              id: "child8",
            },
            {
              id: "child9",
            },
            {
              id: "child10",
            },
            {
              id: "child11",
            },
            {
              id: "child12",
            },
            {
              id: "child13",
            },
            {
              id: "child14",
            },
            {
              id: "child15",
            },
            {
              id: "child16",
            },
          ],
          links: [
            {
              nodeid: "level2_4_1",
            },
          ],
        },
        {
          id: "level1_2",
          to: [
            {
              id: "level2_2_1",
              children: [
                {
                  id: "child1_2_2_1",
                },
                {
                  id: "child2_2_2_1",
                },
              ],
            },
            {
              id: "level2_2_2",
              to: [
                {
                  id: "level2_3_1",
                  to: [
                    {
                      id: "level2_4_1",
                    },
                  ],
                },
              ],
            },
            {
              id: "level2_2_3",
              to: [
                {
                  id: "node1",
                },
              ],
            },
          ],
          links: [
            {
              nodeid: "level1_4_1",
            },
            {
              nodeid: "level2_4_1",
            },
          ],
        },
        {
          id: "level1_3",
          to: [
            {
              id: "level3_2_1",
            },
            {
              id: "level3_2_2",
            },
          ],
          links: [
            {
              nodeid: "level2_4_1",
            },
          ],
        },
      ],
      padding: 16,
      gap: 100,
      ["node-size"]: { width: 200, height: 52 },
      ["children-node-size"]: { width: 200, height: 32 },
      ["max-childrens"]: 8,
      ["node-template"]: `<f-div
        state="secondary"
        width="100%"
        height="100%"
        padding="none medium"
        align="middle-left"
        variant="curved"
        gap="small"
        \${d.children ? 'border="small solid default bottom"' : ""}
      >
        <f-icon source="i-user" size="medium"></f-icon>
        <f-div direction="column" height="hug-content" align="middle-left">
          <f-text variant="code" size="large" ellipsis>\${id}</f-text>
          <f-text variant="code" size="small" ellipsis
            >x: \${d.x}, y: \${d.y}</f-text
          >
        </f-div>
      </f-div>`,
    }}
  >
    {(args) => {
      //  const data = lineageDataGenerator();
      return html`<f-lineage
        .direction=${args.direction}
        .data=${args.data}
        .padding=${args.padding}
        .gap=${args.gap}
        .node-size=${args["node-size"]}
        .children-node-size=${args["children-node-size"]}
        .max-childrens=${args["max-childrens"]}
        .node-template=${args["node-template"]}
      ></f-lineage>`;
    }}
  </Story>
</Canvas>

<br />

<ArgsTable of={"f-lineage"} />
